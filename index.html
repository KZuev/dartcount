<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DartCount</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <h1><span class="dart">DART</span><span class="count">COUNT</span></h1>
        <div class="theme-selection">
            <button id="toggleInterfaceButton" class="language-button" onclick="toggleInterface()" title="–°–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (F9)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10" />
                    <line x1="12" y1="8" x2="12" y2="16" />
                    <line x1="12" y1="4" x2="12" y2="6" />
                </svg>
            </button>
            <div class="language-selection">
                <button id="languageButton" class="language-button" onclick="toggleLanguage()" title="–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫">
                    ru
                </button>
            </div>
            <button id="themeToggle" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ">
                <span class="theme-icon">üåô</span>
            </button>
            <div class="info-circle" onclick="openRules()" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                <span class="info-icon">i</span>
            </div>
        </div>
        <div id="rulesModal" class="modal">
            <div class="modal-content">
                
            </div>
        </div>
            <button class="menu-button" id="startNewGameButton"><span class="emoji">üéØ</span> –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="menu-button" id="playersButton"><span class="emoji">üë•</span> –ò–≥—Ä–æ–∫–∏</button>
            <button class="menu-button" id="statsButton" onclick="showStatsModal()"><span class="emoji">üìä</span> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="menu-button" id="tournamentsButton"><span class="emoji">üèÜ</span> –¢—É—Ä–Ω–∏—Ä—ã</button>
            <button class="menu-button" id="settingsButton" onclick="showStorageModal()"><span class="emoji">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <div class="settings hidden">
                <button id="backToMenuButton">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
                <div class="game-selection">
                    <label id="gameTypeLabel" for="gameType">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É:</label>
                    <select id="gameType">
                        <option value="101">101</option>
                        <option value="301" selected>301</option>
                        <option value="501">501</option>
                    </select>
                </div>
                <div class="player-count">
                    <label id="playerCountLabel">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤:</label>
                    <button onclick="adjustPlayers(-1)">-</button>
                    <span id="playerCount">2</span>
                    <button onclick="adjustPlayers(1)">+</button>
                </div>
                <div class="game-selection">
                    <label id="selectPlayersLabel" for="selectPlayers">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–æ–≤:</label>
                    <div id="selectPlayersContainer" class="select-players-container"></div>
                </div>
                <div class="game-selection">
                    <label id="legModeLabel" for="legMode">–†–µ–∂–∏–º –∏–≥—Ä—ã:</label>
                    <select id="legMode">
                        <option value="bestOf">Best of</option>
                        <option value="firstTo">First to</option>
                    </select>
                </div>
                <div class="game-selection" id="legsCountContainer">
                    <label id="legsCountLabel" for="legsCount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–≥–æ–≤:</label>
                    <select id="legsCount">
                    </select>
                </div>
                <button id="startGameButton" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        <button id="restartBtn" onclick="restartGame()" style="display: none;">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        <div class="score-board" id="scoreBoard"></div>
        <div class="score-input" id="scoreInput" style="display: none;">
            <label id="scoreLabel" for="score">–û—á–∫–∏:</label>
            <input type="text" 
                   id="score" 
                   pattern="[\d+\s]*" 
                   inputmode="numeric" 
                   min="1" 
                   max="180" 
                   autofocus 
                   onkeypress="handleEnter(event)"
                   style="width: 160px; font-size: 1.5em;">
            <button id="submitScoreButton" onclick="submitScore()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—á–∫–∏</button>
            <button id="undoScoreButton" title="–û—Ç–º–µ–Ω–∏—Ç—å –≤–≤–æ–¥ (Ctrl + Z)" onclick="undoScore()">–û—Ç–º–µ–Ω–∏—Ç—å –≤–≤–æ–¥</button>
        </div>
        <div class="stats-board" id="statsBoard" style="display: none;"></div>
    </div>
    <div id="gameStatsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeGameStats()">&times;</span>
            <h2 id="statisticsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã</h2>
            <div id="gameStatsContent" class="game-stats">
            </div>
        </div>
    </div>
    <div id="playersModal" class="modal">
        <div class="modal-content players-modal-content">
            <span class="close-modal" id="closePlayersModal">&times;</span>
            <h2 style="font-size: 2em; color: var(--accent-color);">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏</h2>
            <p style="font-size: 1.2em; color: var(--text-color);">–î–æ–±–∞–≤—å—Ç–µ, –∏–∑–º–µ–Ω–∏—Ç–µ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –∏–≥—Ä—ã.</p>
            <div id="playersList" class="players-list">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ -->
            </div>
            <input type="text" id="newPlayerName" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" style="padding: 10px; border-radius: 5px; width: calc(100% - 22px); margin-bottom: 10px;">
            <div class="button-container">
                <button id="addPlayerButton">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                <button id="savePlayersButton">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
    </div>
    <div id="storageModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeStorageModal()">&times;</span>
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º</h2>
                <input type="file" id="fileInput" onchange="restoreLocalStorageFromFile(event)" style="display: none;" /><br>
            <div class="button-container">
                <button onclick="saveLocalStorageToFile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button onclick="document.getElementById('fileInput').click();">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button onclick="clearLocalStorage()">–û—á–∏—Å—Ç–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</button>
            </div>
        </div>
    </div>
    <div id="throwsModal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: center;">
            <h2 style="font-size: 2em; margin-bottom: 20px;">–ó–∞ —Å–∫–æ–ª—å–∫–æ –±—Ä–æ—Å–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏–≥—Ä–∞?</h2>
            <p style="font-size: 1.2em; margin-bottom: 30px;">(–í—ã–±–µ—Ä–∏—Ç–µ –º—ã—à—å—é –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ 1, 2 –∏–ª–∏ 3 –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ)</p>
            <div class="throws-buttons">
                <button class="throw-button" data-throws="1">1</button>
                <button class="throw-button" data-throws="2">2</button>
                <button class="throw-button" data-throws="3">3</button>
            </div>
        </div>
    </div>
    <div id="confirmDeleteModal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: center;">
            <span class="close-modal" onclick="closeConfirmDeleteModal()">&times;</span>
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
            <h5>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞?</h5>
            <div class="button-container">
                <button id="confirmDeleteButton" 
                        style="font-size: 1.2em; background-color: #ff4444;">
                        –£–¥–∞–ª–∏—Ç—å
                </button>
                <button onclick="closeConfirmDeleteModal()" 
                        style="font-size: 1.2em; background-color: var(--accent-color);">
                        –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    <div id="statsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeStatsModal()">&times;</span>
            <h2 id="statisticsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</h2>
            <div id="playersStatsContent" class="players-stats" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 30px;">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <div class="button-container">
                <button id="closeStatsButton" onclick="closeStatsModal()" style="margin-top: 20px; height: 50px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <p style="font-size: 2em; margin-bottom: 30px; text-align: center; color: white;">–í –†–ê–ó–†–ê–ë–û–¢–ö–ï...</p>
            <div class="button-container">
                <button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <script src="js/script.js"></script>
    <script src="js/rules.js"></script>
</body>
</html>