<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-title" content="DartCount">
    <title>DartCount</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="manifest" href="site.webmanifest" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><span class="dart">DART</span><span class="count">COUNT</span>.ru</h1>
        <div class="theme-selection">
            <button id="reportIssueButton" class="language-button" onclick="openIssuePage()" title="–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ"> üêû </button>
            <button id="toggleInterfaceButton" class="language-button" title="–°–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (F9)">
                <i class="fas fa-power-off"></i>
            </button>
            <div class="language-selection">
                <button id="languageButton" class="language-button" onclick="toggleLanguage()" title="–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫">
                    ru
                </button>
            </div>
            <button id="themeToggle" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ">
                <span class="theme-icon">üåô</span>
            </button>
            <div class="info-circle" onclick="openRules()" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                <span class="info-icon">i</span>
            </div>
        </div>
        <div id="rulesModal" class="modal">
            <div class="modal-content">
                
            </div>
        </div>
        <div class="main-menu">
            <button class="menu-button" id="startNewGameButton"><span class="emoji">üéØ</span> –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="menu-button" id="statsButton" onclick="showStatsModal()"><span class="emoji">üë•</span> –ò–≥—Ä–æ–∫–∏</button>
            <button class="menu-button" id="tournamentsButton"><span class="emoji">üèÜ</span> –¢—É—Ä–Ω–∏—Ä—ã</button>
            <button class="menu-button" id="sessionsButton" onclick="showSessionsModal()"><span class="emoji">üîÑ</span> –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
            <button class="menu-button" id="settingsButton" onclick="showStorageModal()"><span class="emoji">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
            <div class="settings hidden">
                <button id="backToMenuButton">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
                <div class="game-selection">
                    <label id="gameTypeLabel" for="gameType">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É:</label>
                    <select id="gameType">
                        <option value="101">101</option>
                        <option value="301" selected>301</option>
                        <option value="501">501</option>
                    </select>
                </div>
                <div class="player-count">
                    <label id="playerCountLabel">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤:</label>
                    <button onclick="adjustPlayers(-1)">-</button>
                    <span id="playerCount">2</span>
                    <button onclick="adjustPlayers(1)">+</button>
                </div>
                <div class="game-selection">
                    <label id="selectPlayersLabel" for="selectPlayers">–í—ã–±–µ—Ä–∏—Ç–µ<br>–∏–≥—Ä–æ–∫–æ–≤<br>–ø–æ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏<br>–±—Ä–æ—Å–∫–æ–≤:</label>
                    <div id="selectPlayersContainer" class="select-players-container"></div>
                </div>
                <div class="game-selection">
                    <label id="legModeLabel" for="legMode">–†–µ–∂–∏–º –∏–≥—Ä—ã:</label>
                    <select id="legMode">
                        <option value="bestOf">Best of</option>
                        <option value="firstTo">First to</option>
                    </select>
                </div>
                <div class="game-selection" id="legsCountContainer">
                    <label id="legsCountLabel" for="legsCount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–≥–æ–≤:</label>
                    <select id="legsCount">
                    </select>
                </div>
                <button id="startGameButton" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        <div class="score-board" id="currentPlayerName" style="text-align: center; font-size: 3em; margin-bottom: 10px;"></div>
        <div class="score-board" id="scoreBoard"></div>
        <div class="score-input" id="scoreInput" style="display: none;">
            <label id="scoreLabel" for="score">–û—á–∫–∏:</label>
            <div class="score-input-container">
                <input type="text" 
                       id="score" 
                       pattern="[\d+\s]*" 
                       inputmode="numeric" 
                       min="1" 
                       max="180" 
                       autofocus 
                       onkeypress="handleEnter(event)">
                <span class="score-info-icon" role="img" aria-label="–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">‚ÑπÔ∏è</span>
                <div class="score-tooltip">
                    <h4>–ö–∞–∫ –≤–≤–æ–¥–∏—Ç—å –æ—á–∫–∏:</h4>
                    <p><strong>–ü—Ä–æ—Å—Ç–æ–π –≤–≤–æ–¥:</strong><br>
                    ‚Ä¢ –õ—é–±–æ–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 180</p>
                    <p><strong>–°–ª–æ–∂–µ–Ω–∏–µ –±—Ä–æ—Å–∫–æ–≤:</strong><br>
                    ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ + –º–µ–∂–¥—É —á–∏—Å–ª–∞–º–∏<br>
                    ‚Ä¢ –ü—Ä–∏–º–µ—Ä: 20+20+20</p>
                    <p><strong>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±—Ä–æ—Å–∫–∏:</strong><br>
                    ‚Ä¢ D20 = —É–¥–≤–æ–µ–Ω–∏–µ (20√ó2 = 40 –æ—á–∫–æ–≤)<br>
                    ‚Ä¢ T20 = —É—Ç—Ä–æ–µ–Ω–∏–µ (20√ó3 = 60 –æ—á–∫–æ–≤)</p>
                    <p><strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:</strong><br>
                    ‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 180 –æ—á–∫–æ–≤ –∑–∞ –ø–æ–¥—Ö–æ–¥<br>
                    ‚Ä¢ –¢–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞<br>
                    ‚Ä¢ –ù–µ–ª—å–∑—è –æ—Å—Ç–∞–≤–ª—è—Ç—å 1 –æ—á–∫–æ –Ω–∞ —Ñ–∏–Ω–∏—à–µ</p>
                </div>
            </div>
            <button id="submitScoreButton" onclick="submitScore()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—á–∫–∏</button>
            <button id="undoScoreButton" title="–û—Ç–º–µ–Ω–∏—Ç—å –≤–≤–æ–¥ (Ctrl + Z)" onclick="undoScore()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button id="restartBtn" onclick="restartGame()" style="display: none;">‚Üª</button>
        </div>
        <div class="stats-board" id="statsBoard" style="display: none;"></div>
    </div>
    <div id="gameStatsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeGameStats()">&times;</span>
            <h2 id="statisticsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã</h2>
            <div id="gameStatsContent" class="game-stats">
            </div>
        </div>
    </div>
    <div id="playersModal" class="modal">
        <div class="modal-content players-modal-content">
            <span class="close-modal" id="closePlayersModal">&times;</span>
            <h2 style="font-size: 2em; color: var(--accent-color);">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏</h2>
            <p style="font-size: 1.2em; color: var(--text-color);">–î–æ–±–∞–≤—å—Ç–µ, –∏–∑–º–µ–Ω–∏—Ç–µ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –∏–≥—Ä—ã.</p>
            <div id="playersList" class="players-list">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ -->
            </div>
            <input type="text" id="newPlayerName" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" style="padding: 10px; border-radius: 5px; width: calc(100% - 22px); margin-bottom: 10px;">
            <div class="button-container">
                <button id="addPlayerButton">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                <button id="savePlayersButton">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="storageModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeStorageModal()">&times;</span>
            <h2 style="font-size: 2em; color: var(--accent-color);">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <input type="file" id="fileInput" onchange="restoreLocalStorageFromFile(event)" style="display: none;" /><br>
            <div class="button-container">
                <button onclick="saveLocalStorageToFile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ë–î</button>
                <button onclick="document.getElementById('fileInput').click();">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î</button>
                <button onclick="clearLocalStorage()">–û—á–∏—Å—Ç–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</button>
            </div>
            <h3>–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫</h3>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleReportIssue" checked>
                    –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ
                </label>
                <button id="reportIssueButton" class="language-button"> üêû </button>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleToggleInterface" checked>
                    –°–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                </label>
                <button id="toggleInterfaceButton" class="language-button">
                    <i class="fas fa-power-off"></i>
                </label>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleLanguage" checked>
                    –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫
                </label>
                    <button id="languageButton" class="language-button">
                        ru
                    </button>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleTheme" checked>
                    –°–º–µ–Ω–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
                </label>
                <button id="themeToggle">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h3>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleCurrentPlayerName" checked>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞</label>
            </div> 
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—Å—Ç–∞–≤–∫–∏</h3>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleScreensaverClock" checked>
                    –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á–∞—Å—ã –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                </label>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleScreensaverDate" checked>
                    –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—É
                </label>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleScreensaverWeekday" checked>
                    –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
                </label>
            </div>
            <div class="toggle-container">
                <label>
                    <input type="checkbox" id="toggleScreensaverSeconds" checked>
                    –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∫—É–Ω–¥—ã
                </label>
            </div>
            <div class="toggle-container">
                <input type="color" id="clockColor" value="#3498db">
                <label for="clockColor">–¶–≤–µ—Ç —á–∞—Å–æ–≤</label>
            </div>
            <div class="toggle-container">
                <label for="clockSize">–†–∞–∑–º–µ—Ä —á–∞—Å–æ–≤:</label>
                <input type="range" id="clockSize" min="2" max="25" value=20" step="1">
                <span id="clockSizeValue">20em</span>
            </div>
            <div class="toggle-container">
                <label for="dateSize">–†–∞–∑–º–µ—Ä –¥–∞—Ç—ã:</label>
                <input type="range" id="dateSize" min="1" max="15" value="10" step="1">
                <span id="dateSizeValue">10em</span>
            </div>
            <div class="button-container" style="margin-top: 40px;">
                <button onclick="closeStorageModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="throwsModal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: center;">
            <h2 style="font-size: 2em; margin-bottom: 20px;">–ó–∞ —Å–∫–æ–ª—å–∫–æ –±—Ä–æ—Å–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏–≥—Ä–∞?</h2>
            <p style="font-size: 1.2em; margin-bottom: 30px;">(–í—ã–±–µ—Ä–∏—Ç–µ –º—ã—à—å—é –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ 1, 2 –∏–ª–∏ 3 –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ)</p>
            <div class="throws-buttons">
                <button class="throw-button" data-throws="1">1</button>
                <button class="throw-button" data-throws="2">2</button>
                <button class="throw-button" data-throws="3">3</button>
            </div>
        </div>
    </div>
    <div id="confirmDeleteModal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: center;">
            <span class="close-modal" onclick="closeConfirmDeleteModal()">&times;</span>
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
            <h5>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞?</h5>
            <div class="button-container">
                <button id="confirmDeleteButton" 
                        style="font-size: 1.2em; background-color: #ff4444;">
                        –£–¥–∞–ª–∏—Ç—å
                </button>
                <button onclick="closeConfirmDeleteModal()" 
                        style="font-size: 1.2em; background-color: var(--accent-color);">
                        –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    <div id="statsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeStatsModal()">&times;</span>
            <h2 id="statisticsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</h2>
            <div id="playersStatsContent" class="players-stats" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 30px;">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <div id="noPlayersMessage" class="no-players-message" style="display: none;">
                –ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤
            </div>
            <div class="button-container">
                <button id="statsAddPlayerButton"  style="margin-top: 20px; height: 50px;">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                <button id="closeStatsButton" onclick="closeStatsModal()" style="margin-top: 20px; height: 50px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="averageTrendModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAverageTrendModal()">&times;</span>
            <h2>–°—Ä–µ–¥–Ω–∏–π –Ω–∞–±–æ—Ä –∏–≥—Ä–æ–∫–∞</h2>
            <canvas id="averageTrendChart" width="400" height="200"></canvas>
            <div class="button-container">
                <button onclick="closeAverageTrendModal()" style="margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="averageApproachTrendModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAverageApproachTrendModal()">&times;</span>
            <h2>–°—Ä–µ–¥–Ω–∏–π –Ω–∞–±–æ—Ä –∑–∞ –ø–æ–¥—Ö–æ–¥ –∏–≥—Ä–æ–∫–∞</h2>
            <canvas id="averageApproachTrendChart" width="400" height="200"></canvas>
            <div class="button-container">
                <button onclick="closeAverageApproachTrendModal()" style="margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="confirmDeleteModal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: center;">
            <span class="close-modal" onclick="closeConfirmDeleteModal()">&times;</span>
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
            <h5>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞?</h5>
            <div class="button-container">
                <button id="confirmDeleteButton" 
                        style="font-size: 1.2em; background-color: #ff4444;">
                        –£–¥–∞–ª–∏—Ç—å
                </button>
                <button onclick="closeConfirmDeleteModal()" 
                        style="font-size: 1.2em; background-color: var(--accent-color);">
                        –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2 style="font-size: 2em; color: var(--accent-color);">üèÜ –¢—É—Ä–Ω–∏—Ä—ã</h2>
            <p style="font-size: 1.2em; color: var(--text-color);">–°–æ–∑–¥–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—É—Ä–Ω–∏—Ä–æ–≤.</p>
            <input type="text" id="newPlayerName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ (ID)" style="padding: 10px; border-radius: 5px; width: calc(100% - 22px); margin-bottom: 10px;">
            <div class="button-container">
                <button onclick="">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç—É—Ä–Ω–∏—Ä</button>
                <button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <div id="sessionsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeSessionsModal()">&times;</span>
            <h2 style="font-size: 2em; color: var(--accent-color);">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h2>
            <p style="font-size: 1.2em; color: var(--text-color);">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.</p>
            
            <div class="sessions-container">
                <div class="session-status">
                    <h3>–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è</h3>
                    <div id="currentSessionInfo" class="session-info">
                        <p>ID: <span id="currentSessionId">-</span></p>
                        <p>–ü–∞—Ä–æ–ª—å: <span id="currentSessionPassword">-</span></p>
                        <p>–°—Ç–∞—Ç—É—Å: <span id="currentSessionStatus">–ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ</span></p>
                        <p>–í–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö: <span id="currentDataVersion">-</span></p>
                    </div>
                </div>

                <div class="session-actions">
                    <h3>–î–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="button-container">
                        <button onclick="createNewSession()">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é</button>
                        <button onclick="scanSessionQR()">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥</button>
                        <button onclick="showSessionQR()">–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥</button>
                        <button onclick="disconnectSession()" id="disconnectSessionBtn" style="background-color: #ff4444;">–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å–µ—Å—Å–∏–∏</button>
                    </div>
                    <div class="manual-connect">
                        <h4>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏</h4>
                        <div class="input-group">
                            <input type="text" id="sessionIdInput" placeholder="ID —Å–µ—Å—Å–∏–∏" />
                            <input type="password" id="sessionPasswordInput" placeholder="–ü–∞—Ä–æ–ª—å —Å–µ—Å—Å–∏–∏" />
                            <button onclick="connectToSession()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
                        </div>
                    </div>
                    <div id="sessionReader" class="reader"></div>
                </div>

                <div class="sync-settings">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h3>
                    <div class="toggle-container">
                        <label>
                            <input type="checkbox" id="autoSync" checked>
                            –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
                        </label>
                    </div>
                </div>

                <div class="sync-history">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h3>
                    <div id="syncHistory" class="sync-history-list">
                        <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>
            <div class="button-container" style="margin-top: 20px;">
                <button onclick="closeSessionsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è QR-–∫–æ–¥–∞ -->
    <div id="sessionQRModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeSessionQRModal()">&times;</span>
            <h2>QR-–∫–æ–¥ —Å–µ—Å—Å–∏–∏</h2>
            <div id="sessionQRCodeContainer" class="qr-code-container"></div>
            <div class="button-container">
                <button onclick="closeSessionQRModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞ -->
    <div id="scanQRModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeScanQRModal()">&times;</span>
            <h2>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞</h2>
            <div id="qrReader" class="reader"></div>
            <div class="button-container">
                <button onclick="closeScanQRModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    </div>
    <div id="floatingClock" class="floating-clock">
        <div class="time"></div>
        <div class="weekday"></div>
        <div class="date"></div>
    </div>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/script.js"></script>
    <script src="js/rules.js"></script>
</body>
</html>
